<!DOCTYPE html>
<html>
	<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>职业介绍</title>
	<link rel="stylesheet" href="style/jquery.mobile-1.4.5.css">
	<link rel="stylesheet" href="style/theme_zlzw.css">
	<style type="text/css">
		#list{
		}

		#list .ui-first-child{
			background: rgb(246, 246, 246);
			border: 0px;
		}

		#list .desc{
			font-family: 'Microsoft YaHei',sans-serif;
			font-size: 12px;
			font-weight: normal;
		}

		#list .title{
			font-family: 'Microsoft YaHei',sans-serif;
			font-size: 14px;
			font-weight: bold;
		}

		#list .author{
			font-family: 'Microsoft YaHei',sans-serif;
			font-size: 12px;
			font-weight: normal;
		}

		#popup_header h1{
			font-size: 16px;
			font-weight: normal;

		}

		#popup_header h5{
			font-size: 12px;
			font-weight: normal;
		}
	</style>
	<script src="js/jquery.js"></script>
	<script src="js/jquery.mobile-1.4.5.js"></script>
</head>
<body>

<!-- 高考专业 -->
<div data-role="page" class="bg">
	<div data-role="header" data-theme="a">
		<h1>职业介绍</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
		<ul data-role="listview" data-inset="true" id="list" >
			<li>
				
			</li>
		</ul>
	</div>

	<div data-role="footer" data-position="fixed" data-fullscreen='false' data-theme="b">
		<div data-role="navbar">
			<ul>
				<li><a href="EntranceExamination.html" rel="external" class="icon-zlzw icon-1" data-icon="custom">高考专业</a></li>
				<li><a href="CareerPath.html" rel="external" class="icon-zlzw icon-2" data-direction="reverse" data-icon="custom">职业路径</a></li>
				<li><a href="#" class="ui-btn ui-btn-active icon-zlzw icon-3" data-direction="reverse" data-icon="custom">职业介绍</a></li>
				<li><a href="#me" class="icon-zlzw icon-4" data-icon="custom">我</a></li>
			</ul>
		</div><!-- /navbar -->
	</div><!-- /footer -->	
</div>

<!-- list page -->
<div data-role="page" id="popup" class="bg">

	<div data-role="header" data-theme="a"  data-position="fixed" id="popup_header">
		<a href="#gkzy" data-rel="back" class="ui-btn ui-icon-carat-l ui-btn-icon-notext ui-corner-all" style="top:1.5em;"></a>
		<h1></h1>
		<h5></h5>
	</div><!-- /header -->

	<div role="main" class="ui-content" style="background: white;">
		
	</div><!-- /content -->
</div><!-- /page popup -->
<script src="js/zlzw.js"></script>
<script type="text/javascript">

	var oriData;

	var contents = {};

	var list;

	var popupPage;

	function initView( rows ){

		popupPage = $('#popup');

		contents = rows;

		list = $('#list');

		var lis = '';
		$.each(rows, function(i, zhiye){

			lis += '<li><a href="#popup" data-transition="pop" class="jump-content" content=' + i + '><span class="desc">文章简介：' + zhiye.jianJie + '</span><br>'
				 + '<h1 class="title">' + zhiye.tiMu + '</h1>'
				 + '<span class="author">作者：' + zhiye.zuoZhe + '</span></a></li>';

		})
		list.append( lis );
		list.listview('refresh');


		$('.jump-content').click(function(e){
			var i = parseInt( $(this).attr('content') );
			var content = contents[i];
			console.log( content.tiMu );

			$('#popup').find('.ui-content').html( content.neiRong );

			$('#popup_header').find('h1').html( content.tiMu );
			$('#popup_header').find('h5').html( content.zuoZhe );

			$.mobile.changePage( "#popup");
		});
	
	}

	/**
	 * 查询结果
	 */
	function search(){

		var range = getRange();

		var rows = industries[range.category][range.level1][range.major];

		var list = $('#list');
		list.empty();	
		if( rows ){
			var lis = '';

			$.each(rows, function(h, r){
				if( h == 'total' )return;

				lis += '<li>行业：' + h 
				     + '<br>比例：' + r;

			});
			list.append( lis );
		}
		list.listview('refresh');
	}


	$(document).ready(function(){

		zlzw.getData('zyjs', 
			function(data) {
            	console.log(data);
            	oriData = data;
            	initView(data.zhiYes);
            }, 
            function(result) {
            	console.log( result )
            }
        );	
	});

</script>

</body>
</html>
